{"ast":null,"code":"import React,{useState,useEffect}from'react';import{weatherAPI}from'./services/api';import HeroSection from'./components/HeroSection';import WeatherTrends from'./components/WeatherTrends';import AIInsightsPanel from'./components/AIInsightsPanel';import LoadingSpinner from'./components/LoadingSpinner';import Chatbot from'./components/Chatbot';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[summary,setSummary]=useState(null);const[anomalies,setAnomalies]=useState([]);const[timeseriesData,setTimeseriesData]=useState({});const[aiInsights,setAIInsights]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{loadData();},[]);const loadData=async()=>{try{setLoading(true);setError(null);// Load all data in parallel\nconst[summaryData,anomalyData,timeseriesResponse,insightsData]=await Promise.all([weatherAPI.getSummary(),weatherAPI.getAnomalies(undefined,20),weatherAPI.getAnomalyTimeseries('default').catch(()=>({})),// Don't fail if timeseries unavailable\nweatherAPI.getAIInsights().catch(()=>null)// Don't fail if AI is unavailable\n]);setSummary(summaryData);setAnomalies(anomalyData.anomalies);setTimeseriesData(timeseriesResponse);setAIInsights(insightsData);}catch(err){setError(err instanceof Error?err.message:'Failed to load data');console.error('Error loading data:',err);}finally{setLoading(false);}};const runAnomalyDetection=async()=>{try{setLoading(true);await weatherAPI.detectAnomalies();// Reload data after detection\nawait loadData();}catch(err){setError(err instanceof Error?err.message:'Failed to run anomaly detection');}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 flex items-center justify-center\",children:/*#__PURE__*/_jsx(LoadingSpinner,{})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card max-w-md text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-red-600 mb-4\",children:\"Error\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 mb-4\",children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:loadData,className:\"bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg transition-colors\",children:\"Retry\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"bg-black bg-opacity-20 backdrop-blur-sm border-b border-white border-opacity-20\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto px-6 py-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-white flex items-center gap-2\",children:\"\\uD83C\\uDF24\\uFE0F Weather Anomaly Detection Platform\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-blue-200 mt-1\",children:\"AI-powered analysis of 123 years of climate data (1901-2024)\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:runAnomalyDetection,className:\"bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white px-6 py-3 rounded-lg font-semibold transition-all transform hover:scale-105 shadow-lg\",children:\"\\uD83D\\uDD0D Run Detection\"})]})})}),/*#__PURE__*/_jsxs(\"main\",{className:\"container mx-auto px-6 py-8\",children:[/*#__PURE__*/_jsx(HeroSection,{summary:summary,anomalies:anomalies,loading:loading}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-8\",children:/*#__PURE__*/_jsx(WeatherTrends,{timeseriesData:timeseriesData})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-8 max-w-4xl mx-auto\",children:/*#__PURE__*/_jsx(AIInsightsPanel,{insights:aiInsights})}),/*#__PURE__*/_jsx(Chatbot,{}),/*#__PURE__*/_jsxs(\"footer\",{className:\"mt-16 text-center text-blue-200\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\uD83C\\uDFC6 Built for Best Data Hack \\u2022 Best Use of Gemini API \\u2022 Best Use of MongoDB Atlas \\u2022 Best UI/UX\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-2 text-sm\",children:[\"Analyzing \",summary===null||summary===void 0?void 0:summary.total_records.toLocaleString(),\" weather records with AI-powered insights\"]})]})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","weatherAPI","HeroSection","WeatherTrends","AIInsightsPanel","LoadingSpinner","Chatbot","jsx","_jsx","jsxs","_jsxs","App","summary","setSummary","anomalies","setAnomalies","timeseriesData","setTimeseriesData","aiInsights","setAIInsights","loading","setLoading","error","setError","loadData","summaryData","anomalyData","timeseriesResponse","insightsData","Promise","all","getSummary","getAnomalies","undefined","getAnomalyTimeseries","catch","getAIInsights","err","Error","message","console","runAnomalyDetection","detectAnomalies","className","children","onClick","insights","total_records","toLocaleString"],"sources":["C:/Users/wasif/OneDrive/Desktop/weather app proj/frontend/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { weatherAPI } from './services/api';\nimport { WeatherSummary, Anomaly, AIInsights, AnomalyTimeseriesResponse } from './types';\nimport HeroSection from './components/HeroSection';\nimport WeatherTrends from './components/WeatherTrends';\nimport AIInsightsPanel from './components/AIInsightsPanel';\nimport LoadingSpinner from './components/LoadingSpinner';\nimport Chatbot from './components/Chatbot';\n\nfunction App() {\n  const [summary, setSummary] = useState<WeatherSummary | null>(null);\n  const [anomalies, setAnomalies] = useState<Anomaly[]>([]);\n  const [timeseriesData, setTimeseriesData] = useState<AnomalyTimeseriesResponse>({});\n  const [aiInsights, setAIInsights] = useState<AIInsights | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  const loadData = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      // Load all data in parallel\n      const [summaryData, anomalyData, timeseriesResponse, insightsData] = await Promise.all([\n        weatherAPI.getSummary(),\n        weatherAPI.getAnomalies(undefined, 20),\n        weatherAPI.getAnomalyTimeseries('default').catch(() => ({})), // Don't fail if timeseries unavailable\n        weatherAPI.getAIInsights().catch(() => null) // Don't fail if AI is unavailable\n      ]);\n\n      setSummary(summaryData);\n      setAnomalies(anomalyData.anomalies);\n      setTimeseriesData(timeseriesResponse);\n      setAIInsights(insightsData);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to load data');\n      console.error('Error loading data:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const runAnomalyDetection = async () => {\n    try {\n      setLoading(true);\n      await weatherAPI.detectAnomalies();\n      // Reload data after detection\n      await loadData();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to run anomaly detection');\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 flex items-center justify-center\">\n        <LoadingSpinner />\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 flex items-center justify-center\">\n        <div className=\"card max-w-md text-center\">\n          <h2 className=\"text-2xl font-bold text-red-600 mb-4\">Error</h2>\n          <p className=\"text-gray-700 mb-4\">{error}</p>\n          <button\n            onClick={loadData}\n            className=\"bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg transition-colors\"\n          >\n            Retry\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900\">\n      {/* Header */}\n      <header className=\"bg-black bg-opacity-20 backdrop-blur-sm border-b border-white border-opacity-20\">\n        <div className=\"container mx-auto px-6 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h1 className=\"text-3xl font-bold text-white flex items-center gap-2\">\n                üå§Ô∏è Weather Anomaly Detection Platform\n              </h1>\n              <p className=\"text-blue-200 mt-1\">\n                AI-powered analysis of 123 years of climate data (1901-2024)\n              </p>\n            </div>\n            <button\n              onClick={runAnomalyDetection}\n              className=\"bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white px-6 py-3 rounded-lg font-semibold transition-all transform hover:scale-105 shadow-lg\"\n            >\n              üîç Run Detection\n            </button>\n          </div>\n        </div>\n      </header>\n\n      <main className=\"container mx-auto px-6 py-8\">\n        {/* Hero Section with Live Stats */}\n        <HeroSection summary={summary} anomalies={anomalies} loading={loading} />\n        \n        {/* Main Weather Analysis Dashboard */}\n        <div className=\"mt-8\">\n          <WeatherTrends timeseriesData={timeseriesData} />\n        </div>\n\n        {/* AI Insights */}\n        <div className=\"mt-8 max-w-4xl mx-auto\">\n          <AIInsightsPanel insights={aiInsights} />\n        </div>\n\n        {/* Chatbot */}\n        <Chatbot />\n\n        {/* Footer */}\n        <footer className=\"mt-16 text-center text-blue-200\">\n          <p>\n            üèÜ Built for Best Data Hack ‚Ä¢ Best Use of Gemini API ‚Ä¢ Best Use of MongoDB Atlas ‚Ä¢ Best UI/UX\n          </p>\n          <p className=\"mt-2 text-sm\">\n            Analyzing {summary?.total_records.toLocaleString()} weather records with AI-powered insights\n          </p>\n        </footer>\n      </main>\n    </div>\n  );\n}\n\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}