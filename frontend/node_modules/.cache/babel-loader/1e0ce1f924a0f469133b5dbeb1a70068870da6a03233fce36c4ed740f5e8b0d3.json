{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{weatherAPI}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Chatbot=()=>{const[messages,setMessages]=useState([{role:'assistant',content:'Hi! I am your Weather Insights AI. Ask me anything about anomalies, climate, or your uploaded documents.',timestamp:new Date().toISOString()}]);const[input,setInput]=useState('');const[loading,setLoading]=useState(false);const messagesEndRef=useRef(null);useEffect(()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:'smooth'});},[messages]);const sendMessage=async()=>{if(!input.trim())return;const userMessage={role:'user',content:input,timestamp:new Date().toISOString()};setMessages(prev=>[...prev,userMessage]);setInput('');setLoading(true);try{const aiResponse=await weatherAPI.chatWithAI(userMessage.content);setMessages(prev=>[...prev,{role:'assistant',content:aiResponse.response,timestamp:new Date().toISOString()}]);}catch(err){setMessages(prev=>[...prev,{role:'assistant',content:'Sorry, I could not process your request. Please try again.',timestamp:new Date().toISOString()}]);}finally{setLoading(false);}};const handleKeyDown=e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();sendMessage();}};return/*#__PURE__*/_jsxs(\"div\",{className:\"card max-w-2xl mx-auto animate-slide-up mt-8\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2\",children:\"\\uD83E\\uDD16 Weather Insights Chatbot\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"h-80 overflow-y-auto bg-gray-50 rounded-lg p-4 mb-4 border border-gray-200\",children:[messages.map((msg,idx)=>/*#__PURE__*/_jsx(\"div\",{className:`mb-3 flex ${msg.role==='user'?'justify-end':'justify-start'}`,children:/*#__PURE__*/_jsx(\"div\",{className:`rounded-lg px-4 py-2 max-w-[80%] text-sm shadow-sm whitespace-pre-line ${msg.role==='user'?'bg-blue-500 text-white self-end':'bg-white text-gray-800 self-start border border-blue-100'}`,children:msg.content})},idx)),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-3 flex justify-start\",children:/*#__PURE__*/_jsx(\"div\",{className:\"rounded-lg px-4 py-2 max-w-[80%] text-sm bg-white text-gray-400 border border-blue-100 animate-pulse\",children:\"Thinking...\"})}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"flex-1 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400\",placeholder:\"Type your question about anomalies, climate, or your documents...\",value:input,onChange:e=>setInput(e.target.value),onKeyDown:handleKeyDown,disabled:loading}),/*#__PURE__*/_jsx(\"button\",{onClick:sendMessage,className:\"bg-blue-500 hover:bg-blue-600 text-white px-5 py-2 rounded-lg font-semibold transition-colors disabled:opacity-50\",disabled:loading||!input.trim(),children:\"Send\"})]})]});};export default Chatbot;","map":{"version":3,"names":["React","useState","useRef","useEffect","weatherAPI","jsx","_jsx","jsxs","_jsxs","Chatbot","messages","setMessages","role","content","timestamp","Date","toISOString","input","setInput","loading","setLoading","messagesEndRef","_messagesEndRef$curre","current","scrollIntoView","behavior","sendMessage","trim","userMessage","prev","aiResponse","chatWithAI","response","err","handleKeyDown","e","key","shiftKey","preventDefault","className","children","map","msg","idx","ref","type","placeholder","value","onChange","target","onKeyDown","disabled","onClick"],"sources":["C:/Users/wasif/OneDrive/Desktop/weather app proj/frontend/src/components/Chatbot.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { weatherAPI } from '../services/api';\nimport { ChatMessage } from '../types';\n\nconst Chatbot: React.FC = () => {\n  const [messages, setMessages] = useState<ChatMessage[]>([\n    {\n      role: 'assistant',\n      content: 'Hi! I am your Weather Insights AI. Ask me anything about anomalies, climate, or your uploaded documents.',\n      timestamp: new Date().toISOString(),\n    },\n  ]);\n  const [input, setInput] = useState('');\n  const [loading, setLoading] = useState(false);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  const sendMessage = async () => {\n    if (!input.trim()) return;\n    const userMessage: ChatMessage = {\n      role: 'user',\n      content: input,\n      timestamp: new Date().toISOString(),\n    };\n    setMessages((prev) => [...prev, userMessage]);\n    setInput('');\n    setLoading(true);\n    try {\n      const aiResponse = await weatherAPI.chatWithAI(userMessage.content);\n      setMessages((prev) => [\n        ...prev,\n        {\n          role: 'assistant',\n          content: aiResponse.response,\n          timestamp: new Date().toISOString(),\n        },\n      ]);\n    } catch (err) {\n      setMessages((prev) => [\n        ...prev,\n        {\n          role: 'assistant',\n          content: 'Sorry, I could not process your request. Please try again.',\n          timestamp: new Date().toISOString(),\n        },\n      ]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      sendMessage();\n    }\n  };\n\n  return (\n    <div className=\"card max-w-2xl mx-auto animate-slide-up mt-8\">\n      <h3 className=\"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2\">\n        ðŸ¤– Weather Insights Chatbot\n      </h3>\n      <div className=\"h-80 overflow-y-auto bg-gray-50 rounded-lg p-4 mb-4 border border-gray-200\">\n        {messages.map((msg, idx) => (\n          <div key={idx} className={`mb-3 flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>\n            <div\n              className={`rounded-lg px-4 py-2 max-w-[80%] text-sm shadow-sm whitespace-pre-line ${\n                msg.role === 'user'\n                  ? 'bg-blue-500 text-white self-end'\n                  : 'bg-white text-gray-800 self-start border border-blue-100'\n              }`}\n            >\n              {msg.content}\n            </div>\n          </div>\n        ))}\n        {loading && (\n          <div className=\"mb-3 flex justify-start\">\n            <div className=\"rounded-lg px-4 py-2 max-w-[80%] text-sm bg-white text-gray-400 border border-blue-100 animate-pulse\">\n              Thinking...\n            </div>\n          </div>\n        )}\n        <div ref={messagesEndRef} />\n      </div>\n      <div className=\"flex gap-2\">\n        <input\n          type=\"text\"\n          className=\"flex-1 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400\"\n          placeholder=\"Type your question about anomalies, climate, or your documents...\"\n          value={input}\n          onChange={(e) => setInput(e.target.value)}\n          onKeyDown={handleKeyDown}\n          disabled={loading}\n        />\n        <button\n          onClick={sendMessage}\n          className=\"bg-blue-500 hover:bg-blue-600 text-white px-5 py-2 rounded-lg font-semibold transition-colors disabled:opacity-50\"\n          disabled={loading || !input.trim()}\n        >\n          Send\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default Chatbot; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}